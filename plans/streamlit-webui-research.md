---
task_id: streamlit-webui-research
type: RESEARCH
complexity: L
current_phase: I2
completed_phases: [I1]
next_action: RESEARCH_COMPLETE

created_at: 2026-01-11
updated_at: 2026-01-11
---

# Streamlit WebUI è°ƒç ”æŠ¥å‘Š

## é—®é¢˜å®šä¹‰

**ç±»å‹**: RESEARCH-L
**èƒŒæ™¯**: Phase 4.3 ç•Œé¢ä¸äº¤äº’ä»»åŠ¡ï¼Œè°ƒç ” Streamlit å¼€å‘å‚æ•°é…ç½®ä¸ç›‘æ§ç•Œé¢ï¼ˆWebUIï¼‰çš„å¯è¡Œæ€§
**èŒƒå›´**:
- åšä»€ä¹ˆï¼šè¯„ä¼° Streamlit æŠ€æœ¯é€‰å‹ã€åŠŸèƒ½è¦†ç›–ã€é›†æˆå¤æ‚åº¦
- ä¸åšä»€ä¹ˆï¼šæœ¬é˜¶æ®µä¸äº§å‡ºå®é™…ä»£ç 

**å®Œæˆæ ‡å‡†**:
- [x] æŠ€æœ¯é€‰å‹è¯„ä¼°å®Œæˆ
- [x] åŠŸèƒ½éœ€æ±‚ä¸ Streamlit èƒ½åŠ›åŒ¹é…åˆ†æ
- [x] é›†æˆæ–¹æ¡ˆæ¦‚è¿°
- [x] ç»“è®ºä¸å»ºè®®

---

## I1: è°ƒæŸ¥æ¢ç´¢

### 1. Streamlit æŠ€æœ¯æ¦‚è¿°

#### 1.1 æ ¸å¿ƒç‰¹ç‚¹

| ç‰¹æ€§ | æè¿° |
|------|------|
| **å®šä½** | Python è„šæœ¬ â†’ äº¤äº’å¼ Web åº”ç”¨ï¼Œæ— éœ€å‰ç«¯çŸ¥è¯† |
| **GitHub Stars** | 42.9K (2026.01) |
| **ç»´æŠ¤çŠ¶æ€** | æ´»è·ƒç»´æŠ¤ï¼ŒSnowflake æ”¯æŒ |
| **è®¸å¯è¯** | Apache 2.0 |
| **Python ç‰ˆæœ¬** | 3.8+ |

#### 1.2 æ ¸å¿ƒèƒ½åŠ›

1. **æ•°æ®æµæ¨¡å‹**ï¼š
   - è„šæœ¬ä»ä¸Šåˆ°ä¸‹æ‰§è¡Œï¼Œç”¨æˆ·äº¤äº’è§¦å‘å®Œæ•´é‡æ–°è¿è¡Œ
   - è‡ªåŠ¨ç®¡ç† UI çŠ¶æ€å’Œæ•°æ®æ›´æ–°

2. **Widget ç±»å‹**ï¼š
   - è¾“å…¥ï¼š`st.text_input`, `st.number_input`, `st.selectbox`, `st.multiselect`, `st.slider`
   - æ–‡ä»¶ï¼š`st.file_uploader`
   - æŒ‰é’®ï¼š`st.button`, `st.download_button`
   - è¡¨å•ï¼š`st.form` + `st.form_submit_button`

3. **æ•°æ®å±•ç¤º**ï¼š
   - è¡¨æ ¼ï¼š`st.dataframe`, `st.table`, `st.data_editor`
   - å›¾è¡¨ï¼š`st.line_chart`, `st.bar_chart`, é›†æˆ Plotly/Altair
   - è¿›åº¦ï¼š`st.progress`, `st.spinner`, `st.status`
   - æŒ‡æ ‡ï¼š`st.metric` (å¸¦ delta å˜åŒ–æ˜¾ç¤º)

4. **å¸ƒå±€**ï¼š
   - å¤šæ ï¼š`st.columns`
   - ä¾§è¾¹æ ï¼š`st.sidebar`
   - æ ‡ç­¾é¡µï¼š`st.tabs`
   - å®¹å™¨ï¼š`st.container`, `st.expander`

5. **çŠ¶æ€ç®¡ç†**ï¼š
   - `st.session_state` - è·¨é‡æ–°è¿è¡Œä¿æŒçŠ¶æ€
   - `st.cache_data` / `st.cache_resource` - æ•°æ®å’Œèµ„æºç¼“å­˜

#### 1.3 DuckDB é›†æˆ

Streamlit ä¸ DuckDB æœ‰è‰¯å¥½çš„é›†æˆæ¡ˆä¾‹ï¼š
- åŸç”Ÿæ”¯æŒ `pandas.DataFrame`ï¼ŒDuckDB æŸ¥è¯¢ç»“æœå¯ç›´æ¥å±•ç¤º
- ç¤¾åŒºæœ‰ `streamlit + duckdb` çš„ Dashboard æœ€ä½³å®è·µ
- æ”¯æŒå®æ—¶æ•°æ®æ›´æ–°å’Œäº¤äº’å¼æŸ¥è¯¢

---

### 2. é¡¹ç›®éœ€æ±‚åˆ†æ

åŸºäºå¯¹ `config.yaml.example`ã€`db.py`ã€`mda_extractor.py` ç­‰æ–‡ä»¶çš„åˆ†æï¼Œé¡¹ç›® WebUI éœ€æ±‚å¦‚ä¸‹ï¼š

#### 2.1 é…ç½®ç®¡ç†éœ€æ±‚

| æ¨¡å— | é…ç½®é¡¹ | ç±»å‹ | è¯´æ˜ |
|------|--------|------|------|
| çˆ¬è™« | `target_years` | åˆ—è¡¨ | ç›®æ ‡å¹´ä»½ |
| çˆ¬è™« | `plates` | å¤šé€‰ | æ¿å—ç­›é€‰ |
| çˆ¬è™« | `exclude_keywords` | åˆ—è¡¨ | æ’é™¤å…³é”®è¯ |
| ä¸‹è½½å™¨ | `processes` | æ•°å­— | å¹¶å‘æ•° |
| ä¸‹è½½å™¨ | `delete_pdf` | å¸ƒå°” | åˆ é™¤ PDF |
| MDA | `max_pages`, `max_chars` | æ•°å­— | æå–é™åˆ¶ |
| MDA | `incremental` | å¸ƒå°” | å¢é‡æ¨¡å¼ |

**Streamlit åŒ¹é…åº¦**: â­â­â­â­â­
- æ‰€æœ‰é…ç½®ç±»å‹å‡æœ‰åŸç”Ÿ Widget æ”¯æŒ
- è¡¨å•æäº¤å¯ç”Ÿæˆ/æ›´æ–° `config.yaml`

#### 2.2 ç›‘æ§éœ€æ±‚

åŸºäº `db.py` ä¸­çš„è§†å›¾å®šä¹‰ï¼š

| è§†å›¾/éœ€æ±‚ | å±•ç¤ºå½¢å¼ | Streamlit ç»„ä»¶ |
|-----------|----------|----------------|
| `reports_progress` | å¹´åº¦è¿›åº¦æ±‡æ€» | `st.dataframe` + `st.bar_chart` |
| `pending_downloads` | å¾…ä¸‹è½½é˜Ÿåˆ— | `st.dataframe` + è¡Œæ•° `st.metric` |
| `pending_converts` | å¾…è½¬æ¢é˜Ÿåˆ— | `st.dataframe` + è¡Œæ•° `st.metric` |
| `mda_needs_review` | å¾…å®¡æ ¸ MDA | `st.dataframe` + ç­›é€‰ |
| è´¨é‡è¯„åˆ†åˆ†å¸ƒ | ç›´æ–¹å›¾ | `st.bar_chart` / Plotly |
| å®æ—¶æ—¥å¿— | æ»šåŠ¨æ–‡æœ¬ | `st.text_area` / `st.code` |

**Streamlit åŒ¹é…åº¦**: â­â­â­â­â­
- è¡¨æ ¼å±•ç¤ºã€å›¾è¡¨å¯è§†åŒ–å®Œå…¨è¦†ç›–
- æ”¯æŒè‡ªåŠ¨åˆ·æ–° (`st.rerun` / `time.sleep` è½®è¯¢)

#### 2.3 æ“ä½œéœ€æ±‚

| æ“ä½œ | æè¿° | å®ç°æ–¹å¼ |
|------|------|----------|
| å¯åŠ¨çˆ¬è™« | è§¦å‘ `1.report_link_crawler.py` | `subprocess.Popen` + åå°ä»»åŠ¡ |
| å¯åŠ¨ä¸‹è½½ | è§¦å‘ `2.pdf_batch_converter.py` | `subprocess.Popen` + åå°ä»»åŠ¡ |
| å¯åŠ¨æå– | è§¦å‘ `mda_extractor.py` | `subprocess.Popen` + åå°ä»»åŠ¡ |
| åœæ­¢ä»»åŠ¡ | ç»ˆæ­¢è¿›ç¨‹ | è¿›ç¨‹ ID ç®¡ç† |

**Streamlit åŒ¹é…åº¦**: â­â­â­â­
- æŒ‰é’®è§¦å‘åå°è¿›ç¨‹å¯è¡Œ
- è¿›åº¦ç›‘æ§éœ€è¦é¢å¤–çŠ¶æ€ç®¡ç†
- æ³¨æ„ï¼šStreamlit é‡æ–°è¿è¡Œæ¨¡å‹å¯¹é•¿ä»»åŠ¡æœ‰æŒ‘æˆ˜

---

### 3. åŠŸèƒ½åŒ¹é…åº¦è¯„ä¼°

#### 3.1 ä¼˜åŠ¿

| æ–¹é¢ | è¯„ä»· |
|------|------|
| å¼€å‘æ•ˆç‡ | â­â­â­â­â­ çº¯ Pythonï¼Œæ— éœ€å‰ç«¯ |
| å­¦ä¹ æ›²çº¿ | â­â­â­â­â­ 1-2 å¤©å³å¯ä¸Šæ‰‹ |
| æ•°æ®å±•ç¤º | â­â­â­â­â­ DataFrame/å›¾è¡¨åŸç”Ÿæ”¯æŒ |
| é…ç½®è¡¨å• | â­â­â­â­â­ å„ç±» Widget å®Œå–„ |
| DuckDB é›†æˆ | â­â­â­â­â­ åŸç”Ÿ Pandas æ”¯æŒ |
| éƒ¨ç½² | â­â­â­â­ å•å‘½ä»¤å¯åŠ¨ï¼ŒDocker å‹å¥½ |

#### 3.2 åŠ£åŠ¿ä¸åº”å¯¹

| åŠ£åŠ¿ | å½±å“ | åº”å¯¹ç­–ç•¥ |
|------|------|----------|
| å…¨é¡µé‡æ–°è¿è¡Œ | é•¿ä»»åŠ¡çŠ¶æ€ä¸¢å¤± | ä½¿ç”¨ `st.session_state` æŒä¹…åŒ– |
| æ— åŸç”Ÿåå°ä»»åŠ¡ | ä»»åŠ¡ç®¡ç†å¤æ‚ | ä½¿ç”¨ `multiprocessing` æˆ–å¤–éƒ¨ä»»åŠ¡é˜Ÿåˆ— |
| æ— å†…ç½®è®¤è¯ | å¤šç”¨æˆ·åœºæ™¯ | Streamlit Secrets + ç®€å•å¯†ç ä¿æŠ¤ |
| æ—  WebSocket | å®æ—¶æ¨é€å—é™ | è½®è¯¢ + `st.rerun` |

#### 3.3 å¤‡é€‰æ–¹æ¡ˆå¯¹æ¯”

| æ¡†æ¶ | ä¼˜åŠ¿ | åŠ£åŠ¿ | æ¨èåº¦ |
|------|------|------|--------|
| **Streamlit** | æœ€å¿«å¼€å‘ã€Python åŸç”Ÿ | é«˜å¹¶å‘/å¤æ‚äº¤äº’å—é™ | â­â­â­â­â­ (é¦–é€‰) |
| Gradio | ML æ¼”ç¤ºå‹å¥½ | Dashboard èƒ½åŠ›å¼± | â­â­â­ |
| Panel/VoilÃ  | Jupyter é›†æˆ | ç”Ÿæ€è¾ƒå° | â­â­â­ |
| FastAPI + React | çµæ´»ã€å¯æ‰©å±• | å¼€å‘æˆæœ¬é«˜ | â­â­ (è¿‡åº¦å·¥ç¨‹) |

---

### 4. é›†æˆå¤æ‚åº¦åˆ†æ

#### 4.1 æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Streamlit WebUI                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ é…ç½®ç®¡ç†é¡µ  â”‚  â”‚ ç›‘æ§ä»ªè¡¨ç›˜  â”‚  â”‚ ä»»åŠ¡ç®¡ç†é¡µ          â”‚  â”‚
â”‚  â”‚ - YAML ç¼–è¾‘ â”‚  â”‚ - è¿›åº¦è§†å›¾  â”‚  â”‚ - å¯åŠ¨/åœæ­¢ä»»åŠ¡     â”‚  â”‚
â”‚  â”‚ - è¡¨å•é…ç½®  â”‚  â”‚ - è´¨é‡ç»Ÿè®¡  â”‚  â”‚ - æ—¥å¿—æŸ¥çœ‹          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                           â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  DuckDB     â”‚            â”‚  å­è¿›ç¨‹ç®¡ç†    â”‚
       â”‚  data/*.db  â”‚            â”‚  (Popen)      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2 æ–‡ä»¶ç»“æ„å»ºè®®

```
webui/
â”œâ”€â”€ app.py                  # ä¸»å…¥å£ (å¤šé¡µåº”ç”¨)
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ 1_é…ç½®ç®¡ç†.py        # é…ç½®ç¼–è¾‘é¡µ
â”‚   â”œâ”€â”€ 2_ç›‘æ§ä»ªè¡¨ç›˜.py      # è¿›åº¦ç›‘æ§é¡µ
â”‚   â””â”€â”€ 3_ä»»åŠ¡ç®¡ç†.py        # ä»»åŠ¡æ§åˆ¶é¡µ
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ db_utils.py         # DuckDB æŸ¥è¯¢å°è£…
â”‚   â”œâ”€â”€ task_runner.py      # åå°ä»»åŠ¡ç®¡ç†
â”‚   â””â”€â”€ config_editor.py    # é…ç½®æ–‡ä»¶æ“ä½œ
â””â”€â”€ .streamlit/
    â””â”€â”€ config.toml         # Streamlit é…ç½®
```

#### 4.3 ä¾èµ–éœ€æ±‚

```
# requirements-webui.txt
streamlit>=1.35.0
duckdb>=1.0.0
pandas>=2.0.0
pyyaml>=6.0
plotly>=5.0.0  # å¯é€‰ï¼Œå¢å¼ºå›¾è¡¨
```

#### 4.4 å¼€å‘å·¥ä½œé‡ä¼°ç®—

| åŠŸèƒ½æ¨¡å— | å¤æ‚åº¦ | é¢„è®¡å·¥ä½œé‡ |
|----------|--------|------------|
| åŸºç¡€æ¡†æ¶æ­å»º | ä½ | 0.5 å¤© |
| é…ç½®ç®¡ç†é¡µ | ä¸­ | 1 å¤© |
| ç›‘æ§ä»ªè¡¨ç›˜ | ä¸­ | 1 å¤© |
| ä»»åŠ¡ç®¡ç†é¡µ | é«˜ | 1.5 å¤© |
| æµ‹è¯•ä¸è°ƒä¼˜ | ä¸­ | 1 å¤© |
| **æ€»è®¡** | - | **5 å¤©** |

---

## I2: ç»¼åˆæ€»ç»“

### æ ¸å¿ƒå‘ç°

1. **æŠ€æœ¯å¥‘åˆåº¦é«˜**: Streamlit çš„ Python åŸç”Ÿç‰¹æ€§ä¸æœ¬é¡¹ç›®æŠ€æœ¯æ ˆå®Œç¾åŒ¹é…ï¼ŒDuckDB æŸ¥è¯¢ç»“æœå¯ç›´æ¥å±•ç¤º
2. **å¼€å‘æ•ˆç‡ä¼˜åŠ¿æ˜æ˜¾**: é¢„è®¡ 5 å¤©å¯å®Œæˆ MVPï¼Œç›¸æ¯” FastAPI+React èŠ‚çœ 70% ä»¥ä¸Šå¼€å‘æ—¶é—´
3. **åŠŸèƒ½è¦†ç›–å®Œæ•´**: é…ç½®ç®¡ç†ã€è¿›åº¦ç›‘æ§ã€è´¨é‡ç»Ÿè®¡ç­‰æ ¸å¿ƒéœ€æ±‚å‡å¯æ»¡è¶³
4. **ç¤¾åŒºç”Ÿæ€æ´»è·ƒ**: GitHub 42.9K Starsï¼ŒSnowflake èƒŒä¹¦ï¼Œé•¿æœŸç»´æŠ¤æœ‰ä¿éšœ

### æ½œåœ¨é£é™©

1. **é•¿ä»»åŠ¡ç®¡ç†**: Streamlit çš„é‡æ–°è¿è¡Œæ¨¡å‹å¯¹é•¿æ—¶é—´è¿è¡Œçš„çˆ¬è™«/ä¸‹è½½ä»»åŠ¡éœ€è¦é¢å¤–è®¾è®¡
2. **å¹¶å‘ç”¨æˆ·**: ä¸é€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼Œä½†ä½œä¸ºå†…éƒ¨å·¥å…·å®Œå…¨è¶³å¤Ÿ
3. **çŠ¶æ€ä¸€è‡´æ€§**: éœ€è¦è°¨æ…ä½¿ç”¨ `session_state` é¿å…çŠ¶æ€ä¸¢å¤±

---

## ç»“è®ºä¸å»ºè®®

### æ¨èç»“è®º

**å¼ºçƒˆæ¨èä½¿ç”¨ Streamlit** ä½œä¸ºæœ¬é¡¹ç›® WebUI æŠ€æœ¯é€‰å‹ã€‚

### ç†ç”±

1. **ä½æŠ•å…¥é«˜å›æŠ¥**: 5 å¤©å¼€å‘å‘¨æœŸï¼Œæ˜¾è‘—æå‡å·¥å…·æ˜“ç”¨æ€§
2. **æŠ€æœ¯æ ˆä¸€è‡´**: çº¯ Python å®ç°ï¼Œä¸ç°æœ‰ä»£ç æ— ç¼é›†æˆ
3. **DuckDB åŸç”Ÿæ”¯æŒ**: ç›‘æ§è§†å›¾å¯ç›´æ¥å±•ç¤º
4. **å¿«é€Ÿè¿­ä»£**: æ”¹åŠ¨å³æ—¶ç”Ÿæ•ˆï¼Œä¾¿äºæŒç»­æ”¹è¿›

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

1. **P1** - åˆ›å»º `webui/` ç›®å½•ï¼Œåˆå§‹åŒ– Streamlit å¤šé¡µåº”ç”¨éª¨æ¶
2. **P1** - å®ç°ç›‘æ§ä»ªè¡¨ç›˜é¡µï¼ˆå¤ç”¨ `reports_progress` ç­‰è§†å›¾ï¼‰
3. **P2** - å®ç°é…ç½®ç®¡ç†é¡µï¼ˆè¯»å†™ `config.yaml`ï¼‰
4. **P2** - å®ç°ä»»åŠ¡ç®¡ç†é¡µï¼ˆåå°è¿›ç¨‹å¯åœï¼‰
5. **P3** - æ·»åŠ ç®€å•è®¤è¯ï¼ˆå¯†ç ä¿æŠ¤ï¼‰

### ç¤ºä¾‹ä»£ç ç‰‡æ®µ

```python
# webui/pages/2_ç›‘æ§ä»ªè¡¨ç›˜.py
import streamlit as st
import duckdb
import pandas as pd

st.set_page_config(page_title="ç›‘æ§ä»ªè¡¨ç›˜", layout="wide")
st.title("ğŸ“Š å¹´æŠ¥å¤„ç†è¿›åº¦")

# è¿æ¥ DuckDB
@st.cache_resource
def get_connection():
    return duckdb.connect("data/annual_reports.duckdb", read_only=True)

conn = get_connection()

# è¿›åº¦æ€»è§ˆ
st.subheader("å¹´åº¦è¿›åº¦")
df_progress = conn.execute("SELECT * FROM reports_progress").df()
st.dataframe(df_progress, use_container_width=True)

# å¾…å¤„ç†é˜Ÿåˆ—
col1, col2 = st.columns(2)
with col1:
    pending_dl = conn.execute("SELECT COUNT(*) FROM pending_downloads").fetchone()[0]
    st.metric("å¾…ä¸‹è½½", pending_dl)
with col2:
    pending_cv = conn.execute("SELECT COUNT(*) FROM pending_converts").fetchone()[0]
    st.metric("å¾…è½¬æ¢", pending_cv)

# è‡ªåŠ¨åˆ·æ–°
if st.button("ğŸ”„ åˆ·æ–°æ•°æ®"):
    st.rerun()
```

---

## å‚è€ƒèµ„æ–™

- [Streamlit å®˜æ–¹æ–‡æ¡£](https://docs.streamlit.io/)
- [Streamlit + DuckDB å®è·µæ¡ˆä¾‹](https://clickhouse.com/resources/engineering)
- [Streamlit GitHub ä»“åº“](https://github.com/streamlit/streamlit)
