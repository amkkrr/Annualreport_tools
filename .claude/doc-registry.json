{
  "$schema": "è‡ªå®šä¹‰æ–‡æ¡£æ³¨å†Œè¡¨ï¼Œç”¨äº sync-docs skill çš„è‡ªåŠ¨å‘ç°å’Œæ›´æ–°",
  "version": "2.0.0",

  "sync_state": {
    "active_sync": false,
    "started_at": null,
    "current_phase": null,
    "completed_phases": [],
    "next_action": null,
    "next_action_context": null,
    "pending_updates": [],
    "completed_updates": []
  },

  "discovery_rules": {
    "scripts": {
      "pattern": "*.py",
      "exclude": ["__pycache__", "test_*", "*_test.py"],
      "description": "æ ¹ç›®å½•ä¸‹çš„ Python è„šæœ¬è§†ä¸ºæ ¸å¿ƒæ¨¡å—"
    },
    "packages": {
      "pattern": "*/__init__.py",
      "exclude": ["__pycache__"],
      "description": "å« __init__.py çš„ç›®å½•è§†ä¸º Python åŒ…"
    },
    "tech_docs": {
      "pattern": "docs/*.md",
      "exclude": ["README.*.md"],
      "description": "docs ç›®å½•ä¸‹çš„ markdown æ–‡ä»¶è§†ä¸ºæŠ€æœ¯æ–‡æ¡£"
    },
    "data_schemas": {
      "pattern": "data/*.json",
      "description": "data ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶è§†ä¸ºæ•°æ®ç»“æ„å®šä¹‰"
    },
    "plans": {
      "pattern": "plans/*.md",
      "description": "plans ç›®å½•ä¸‹çš„è§„åˆ’ä¸å®¡è®¡æ–‡æ¡£ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼Œä¸ç´¢å¼•åˆ° READMEï¼‰"
    }
  },

  "update_triggers": {
    "new_script": {
      "condition": "æ–°å¢æ ¹ç›®å½• *.py æ–‡ä»¶",
      "updates": ["README.md#æ¨¡å—æ¦‚è§ˆ", "README.md#æ ¸å¿ƒåŠŸèƒ½", "CLAUDE.md#æ ¸å¿ƒæ¨¡å—"]
    },
    "new_package": {
      "condition": "æ–°å¢ Python åŒ…ç›®å½•",
      "updates": ["README.md#æ¨¡å—æ¦‚è§ˆ", "CLAUDE.md#æ ¸å¿ƒæ¨¡å—", "CLAUDE.md#é¡¹ç›®ç»“æ„"]
    },
    "db_change": {
      "condition": "ä¿®æ”¹ */db.py æˆ– */models.py",
      "updates": ["data/schema.json"]
    },
    "new_dependency": {
      "condition": "ä¿®æ”¹ requirements.txt",
      "updates": ["docs/dependency_graph.md"]
    },
    "new_tech_doc": {
      "condition": "æ–°å¢ docs/*.md",
      "updates": ["README.md#æŠ€æœ¯æ–‡æ¡£"]
    },
    "task_completed": {
      "condition": "git commit åŒ¹é… TODO.md ä»»åŠ¡æè¿°",
      "updates": ["TODO.md"],
      "match_strategies": ["id_match", "keyword_match", "path_match", "milestone_match"]
    }
  },

  "document_sections": {
    "README.md": {
      "æ ¸å¿ƒåŠŸèƒ½": {
        "format": "numbered_list",
        "source": "scripts + packages",
        "template": "**{name}** â€“ {description}"
      },
      "æ¨¡å—æ¦‚è§ˆ": {
        "format": "table",
        "columns": ["è„šæœ¬/èµ„æº", "è¯´æ˜"],
        "source": "scripts + packages + resources"
      },
      "è„šæœ¬ç´¢å¼•": {
        "format": "numbered_list",
        "source": "scripts"
      },
      "æŠ€æœ¯æ–‡æ¡£": {
        "format": "bullet_list",
        "source": "tech_docs"
      },
      "æ›´æ–°æ—¥å¿—": {
        "format": "table",
        "auto_add": "today's changes at top"
      }
    },
    "CLAUDE.md": {
      "æ ¸å¿ƒæ¨¡å—": {
        "format": "table",
        "columns": ["æ–‡ä»¶", "åŠŸèƒ½"],
        "source": "scripts + packages"
      },
      "é¡¹ç›®ç»“æ„": {
        "format": "tree",
        "source": "filesystem"
      },
      "å¸¸ç”¨å‘½ä»¤": {
        "format": "code_block",
        "source": "scripts with --help"
      }
    },
    "data/schema.json": {
      "tables": {
        "source": "*/db.py CREATE TABLE statements"
      },
      "views": {
        "source": "*/db.py CREATE VIEW statements"
      }
    },
    "docs/dependency_graph.md": {
      "mermaid_graph": {
        "source": "requirements.txt + import analysis"
      },
      "dependency_table": {
        "source": "requirements.txt"
      }
    },
    "TODO.md": {
      "task_items": {
        "format": "checkbox_list",
        "pattern": "- \\[ \\] `P[0-3]`",
        "source": "manual + git commits"
      },
      "milestones": {
        "format": "heading",
        "pattern": "### ğŸ“ é‡Œç¨‹ç¢‘ M\\d+",
        "source": "manual"
      },
      "match_rules": {
        "id_pattern": "(M\\d+(-\\d+)?|\\d+\\.\\d+(\\.\\d+)?)",
        "keyword_extraction": "backtick_content + priority_tag",
        "path_mapping": {
          "mda_extractor.py": ["2.5", "MD&A"],
          "config.yaml": ["1.1", "é…ç½®"],
          "*/db.py": ["1.2", "DuckDB"],
          "requirements.txt": ["ä¾èµ–"]
        }
      }
    }
  },

  "module_metadata": {
    "1.report_link_crawler.py": {
      "name": "report_link_crawler",
      "description": "æŒ‰æ¿å—/è¡Œä¸šåˆ†æ®µæŸ¥è¯¢å·¨æ½®èµ„è®¯ï¼Œåœ¨é€Ÿç‡é™åˆ¶ä¸‹ä¿æŒç¨³å®šï¼Œæ”¯æŒ DuckDB/Excel åŒæ¨¡å¼è¾“å‡º",
      "category": "crawler"
    },
    "2.pdf_batch_converter.py": {
      "name": "pdf_batch_converter",
      "description": "å…·æœ‰MIMEéªŒè¯çš„é²æ£’PDFä¸‹è½½å™¨ + è½¬æ¢ä¸ºTXTï¼Œæ”¯æŒä» DuckDB/Excel è¯»å–ä»»åŠ¡",
      "category": "converter"
    },
    "3.text_analysis.py": {
      "name": "text_analysis",
      "description": "å¤šè¿›ç¨‹å…³é”®è¯åˆ†æå™¨ + Excelå¯¼å‡º",
      "category": "analyzer"
    },
    "text_analysis_universal.py": {
      "name": "text_analysis_universal",
      "description": "æ¥å—ä»»æ„TXTç›®å½•çš„è½»é‡çº§åˆ†æå™¨",
      "category": "analyzer"
    },
    "mda_extractor.py": {
      "name": "mda_extractor",
      "description": "ä»å¹´æŠ¥æ–‡æœ¬ä¸­æå–ã€Œç®¡ç†å±‚è®¨è®ºä¸åˆ†æã€(MD&A) ç« èŠ‚",
      "category": "extractor",
      "package": "annual_report_mda"
    },
    "scripts/migrate_excel_to_duckdb.py": {
      "name": "migrate_excel_to_duckdb",
      "description": "Excel â†’ DuckDB ä¸€æ¬¡æ€§æ•°æ®è¿ç§»è„šæœ¬ï¼Œæ”¯æŒå¹‚ç­‰æ‰§è¡Œ",
      "category": "migration",
      "added": "2026-01-08"
    },
    "scripts/llm_annotate.py": {
      "name": "llm_annotate",
      "description": "LLM è¾…åŠ©æ ‡æ³¨å·¥å…·ï¼Œä»å¹´æŠ¥æ–‡æœ¬ç”Ÿæˆé»„é‡‘æ•°æ®é›†",
      "category": "evaluation",
      "added": "2026-01-10"
    },
    "scripts/evaluate_extraction.py": {
      "name": "evaluate_extraction",
      "description": "æå–è´¨é‡è¯„ä¼°è„šæœ¬ï¼Œæ”¯æŒè§„åˆ™è¯„ä¼°å’Œ LLM è¯„ä¼°åŒæ¨¡å¼",
      "category": "evaluation",
      "added": "2026-01-10"
    },
    "scripts/auto_improve.py": {
      "name": "auto_improve",
      "description": "è‡ªåŠ¨åˆ†æå¤±è´¥æ¨¡å¼å¹¶ç”Ÿæˆæ”¹è¿›å»ºè®®",
      "category": "evaluation",
      "added": "2026-01-10"
    },
    "scripts/fix_golden_offsets.py": {
      "name": "fix_golden_offsets",
      "description": "ä¿®å¤é»„é‡‘æ•°æ®é›†ä¸­ LLM æ ‡æ³¨çš„å­—ç¬¦åç§»é‡",
      "category": "evaluation",
      "added": "2026-01-10"
    },
    "scripts/select_golden_samples.py": {
      "name": "select_golden_samples",
      "description": "ä»æ•°æ®åº“éšæœºé€‰å–é»„é‡‘æ ·æœ¬ç”¨äºè¯„ä¼°",
      "category": "evaluation",
      "added": "2026-01-10"
    },
    "scripts/download_samples.py": {
      "name": "download_samples",
      "description": "ä¸‹è½½é»„é‡‘æ ·æœ¬å¯¹åº”çš„å¹´æŠ¥æ–‡ä»¶",
      "category": "evaluation",
      "added": "2026-01-10"
    },
    "scripts/backfill_quality_score.py": {
      "name": "backfill_quality_score",
      "description": "M2 éªŒæ”¶ - è´¨é‡è¯„åˆ†å›å¡«è„šæœ¬ï¼Œé‡æ–°è®¡ç®—ç°æœ‰è®°å½•çš„ quality_score",
      "category": "migration",
      "added": "2026-01-11"
    },
    "scripts/migrate_mda_schema.py": {
      "name": "migrate_mda_schema",
      "description": "M2 éªŒæ”¶ - Schema è¿ç§»è„šæœ¬ï¼Œä¸º mda_text è¡¨æ·»åŠ ç¼ºå¤±å­—æ®µ",
      "category": "migration",
      "added": "2026-01-11"
    },
    "scripts/migrate_duckdb_to_sqlite.py": {
      "name": "migrate_duckdb_to_sqlite",
      "description": "åŒæ•°æ®åº“æ¶æ„è¿ç§»è„šæœ¬ï¼Œå°†å…ƒæ•°æ®ä» DuckDB è¿ç§»è‡³ SQLite",
      "category": "migration",
      "added": "2026-01-12"
    }
  },

  "package_metadata": {
    "annual_report_mda": {
      "description": "MD&A æå–æ ¸å¿ƒåŒ…ï¼ˆstrategies, scorer, db, text_loader, data_manager, config_managerï¼‰",
      "entry_point": "mda_extractor.py",
      "submodules": {
        "strategies.py": {
          "description": "å¤šç­–ç•¥è¿­ä»£æå– MD&A ç« èŠ‚ï¼ˆTOC è§£æ + æ­£æ–‡æ‰«æï¼‰",
          "added": "2026-01-02"
        },
        "scorer.py": {
          "description": "è´¨é‡è¯„åˆ†å™¨ï¼Œæ£€æµ‹é•¿åº¦ã€å…³é”®è¯ã€æ ¼å¼å¼‚å¸¸",
          "added": "2026-01-02"
        },
        "db.py": {
          "description": "DuckDB æ•°æ®åº“æ“ä½œå°è£…ï¼ˆOLAP å¼•æ“ï¼Œç®¡ç† mda_text åŠåˆ†æç»“æœï¼‰",
          "added": "2026-01-02",
          "updated": "2026-01-12"
        },
        "sqlite_db.py": {
          "description": "SQLite æ•°æ®åº“æ“ä½œå°è£…ï¼ˆOLTP å¼•æ“ï¼Œç®¡ç† companies, reports, logs ç­‰å…ƒæ•°æ®ï¼‰",
          "added": "2026-01-12"
        },
        "text_loader.py": {
          "description": "æ–‡æœ¬æ–‡ä»¶åŠ è½½ä¸é¡µåˆ†å‰²å™¨",
          "added": "2026-01-02"
        },
        "data_manager.py": {
          "description": "æ•°æ®ç®¡ç†å™¨ï¼Œåè°ƒæå–ä¸æ•°æ®åº“æ“ä½œ",
          "added": "2026-01-02"
        },
        "config_manager.py": {
          "description": "ç»Ÿä¸€é…ç½®ç®¡ç†æ¨¡å—ï¼ŒåŸºäº Pydantic v2 + YAML",
          "added": "2026-01-07"
        },
        "section_splitter.py": {
          "description": "MD&A æ–‡æœ¬å­—æ®µåˆ‡åˆ†æ¨¡å—ï¼Œå°†æ–‡æœ¬åˆ‡åˆ†ä¸ºç»è¥å›é¡¾å’Œæœªæ¥å±•æœ›",
          "added": "2026-01-10"
        },
        "utils.py": {
          "description": "é€šç”¨å·¥å…·å‡½æ•°ï¼ˆè·¯å¾„è§£æã€å“ˆå¸Œè®¡ç®—ç­‰ï¼‰",
          "added": "2026-01-02"
        }
      },
      "subpackages": {
        "llm": {
          "description": "LLM ç»Ÿä¸€å®¢æˆ·ç«¯å­åŒ…ï¼Œæ”¯æŒ DeepSeek/Qwen/Claude/OpenAI å¤šæä¾›å•†è‡ªåŠ¨é™çº§",
          "added": "2026-01-11",
          "submodules": {
            "client.py": "å¤šæä¾›å•†å®¢æˆ·ç«¯ï¼Œè‡ªåŠ¨é™çº§ä¸é‡è¯•",
            "prompts.py": "Prompt æ¨¡æ¿ç®¡ç†",
            "providers/base.py": "æä¾›å•†åŸºç±»",
            "providers/deepseek.py": "DeepSeek é€‚é…å™¨ (OpenAI å…¼å®¹)",
            "providers/qwen.py": "é€šä¹‰åƒé—®é€‚é…å™¨ (dashscope)",
            "providers/claude.py": "Claude é€‚é…å™¨ (anthropic)",
            "providers/openai.py": "OpenAI é€‚é…å™¨"
          }
        },
        "adaptive": {
          "description": "è‡ªé€‚åº”å­¦ä¹ å­åŒ…ï¼ŒLLM é©±åŠ¨çš„æå–ä¼˜åŒ–",
          "added": "2026-01-11",
          "submodules": {
            "self_refine.py": "Self-Refine è¿­ä»£æ”¹è¿›æå–è´¨é‡",
            "few_shot.py": "åŠ¨æ€ Few-shot æ ·æœ¬åº“ï¼Œå‘é‡åŒ–å­˜å‚¨ä¸æ£€ç´¢",
            "strategy_weights.py": "ç­–ç•¥æƒé‡è‡ªé€‚åº”ï¼ŒåŠ¨æ€è°ƒæ•´é€‰æ‹©æƒé‡",
            "failure_patterns.py": "å¤±è´¥æ¨¡å¼å­¦ä¹ ï¼Œç”Ÿæˆæ’é™¤è§„åˆ™"
          }
        }
      }
    },
    "tests": {
      "description": "å•å…ƒæµ‹è¯•åŒ…",
      "added": "2026-01-08",
      "submodules": {
        "test_duckdb_core.py": {
          "description": "DuckDB æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ï¼ˆM1 éªŒè¯ï¼‰",
          "added": "2026-01-08"
        },
        "test_scorer.py": {
          "description": "è¯„åˆ†å™¨å•å…ƒæµ‹è¯•ï¼ˆè´Ÿå‘ç‰¹å¾æ£€æµ‹ã€ç»¼åˆè´¨é‡è¯„åˆ†ï¼‰",
          "added": "2026-01-10"
        },
        "test_m2_verification.py": {
          "description": "M2 é‡Œç¨‹ç¢‘éªŒæ”¶æµ‹è¯•ï¼ˆå…¨æµç¨‹é©±åŠ¨ã€æ–­ç‚¹ç»­ä¼ ã€è´¨é‡è¯„åˆ†ï¼‰",
          "added": "2026-01-11"
        },
        "test_strategies.py": {
          "description": "MD&A æå–ç­–ç•¥å•å…ƒæµ‹è¯•ï¼ˆTOC è§£æã€æ­£æ–‡æ‰«æï¼‰",
          "added": "2026-01-11"
        },
        "test_mda_extractor.py": {
          "description": "MD&A æå–å™¨å•å…ƒæµ‹è¯•ï¼ˆè¿­ä»£ç­–ç•¥ã€è¾¹ç•Œå¤„ç†ï¼‰",
          "added": "2026-01-11"
        },
        "test_mda_integration.py": {
          "description": "MD&A ç«¯åˆ°ç«¯é›†æˆæµ‹è¯•ï¼ˆå¢é‡é€»è¾‘ã€æ•°æ®åº“å†™å…¥ï¼‰",
          "added": "2026-01-11"
        },
        "test_yoy_validator.py": {
          "description": "L3 æ—¶åºæ ¡éªŒæµ‹è¯•ï¼ˆFLAG_YOY_CHANGE_HIGH æ£€æµ‹ï¼‰",
          "added": "2026-01-11"
        },
        "test_llm_client.py": {
          "description": "LLM å®¢æˆ·ç«¯å•å…ƒæµ‹è¯•ï¼ˆå¤šæä¾›å•†ã€é™çº§ã€JSON è§£æï¼‰",
          "added": "2026-01-11"
        },
        "test_adaptive.py": {
          "description": "è‡ªé€‚åº”å­¦ä¹ æ¨¡å—æµ‹è¯•ï¼ˆFew-shotã€ç­–ç•¥æƒé‡ã€å¤±è´¥æ¨¡å¼ï¼‰",
          "added": "2026-01-11"
        },
        "test_logging.py": {
          "description": "æ—¥å¿—ç³»ç»Ÿæµ‹è¯•ï¼ˆç»Ÿä¸€é…ç½®ã€æ–‡ä»¶è½®è½¬ã€æ ¼å¼éªŒè¯ï¼‰",
          "added": "2026-01-11"
        }
      }
    },
    "webui": {
      "description": "Streamlit WebUIï¼Œæä¾›ç›‘æ§ä»ªè¡¨ç›˜ã€é…ç½®ç®¡ç†ã€ä»»åŠ¡ç®¡ç†ç•Œé¢",
      "added": "2026-01-11",
      "entry_point": "app.py",
      "submodules": {
        "app.py": {
          "description": "WebUI ä¸»å…¥å£ï¼Œå®šä¹‰é¡µé¢é…ç½®å’Œé¦–é¡µå†…å®¹",
          "added": "2026-01-11"
        }
      },
      "subpackages": {
        "components": {
          "description": "å¯å¤ç”¨ UI ç»„ä»¶",
          "added": "2026-01-11",
          "submodules": {
            "config_editor.py": "é…ç½®æ–‡ä»¶ç¼–è¾‘å™¨ç»„ä»¶",
            "db_utils.py": "DuckDB æ•°æ®åº“æŸ¥è¯¢å·¥å…·",
            "pid_manager.py": "åå°è¿›ç¨‹ PID ç®¡ç†å™¨ï¼Œæ”¯æŒè·¨ä¼šè¯ä»»åŠ¡è¿½è¸ª",
            "task_runner.py": "åå°ä»»åŠ¡è¿è¡Œå™¨ï¼Œé›†æˆ PID ç®¡ç†"
          }
        },
        "pages": {
          "description": "Streamlit å¤šé¡µé¢åº”ç”¨",
          "added": "2026-01-11",
          "submodules": {
            "1_ç›‘æ§ä»ªè¡¨ç›˜.py": "æ•°æ®å¤„ç†è¿›åº¦ã€é˜Ÿåˆ—çŠ¶æ€ã€å…³é”®æŒ‡æ ‡ç›‘æ§",
            "2_é…ç½®ç®¡ç†.py": "config.yaml åœ¨çº¿ç¼–è¾‘ä¸éªŒè¯",
            "3_ä»»åŠ¡ç®¡ç†.py": "åå°ä»»åŠ¡å¯åŠ¨ã€åœæ­¢ä¸æ—¥å¿—æŸ¥çœ‹",
            "4_å¹´æŠ¥æµè§ˆå™¨.py": "å¹´æŠ¥ç­›é€‰ã€ä¸‹è½½çŠ¶æ€ç®¡ç†ä¸æ‰‹åŠ¨è§¦å‘æµç¨‹"
          }
        }
      }
    }
  }
}
